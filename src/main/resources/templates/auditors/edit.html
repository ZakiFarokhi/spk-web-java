<!DOCTYPE html>
<html layout:decorate="~{shared/layout}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">

<th:block layout:fragment="content">

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Edit User</h3>
        </div>

        <div class="card-body">
            <form th:action="@{/users/update}" method="post">

                <input type="hidden" th:field="${user.id}"/>

                <div class="form-group">
                    <label>Username</label>
                    <input type="text" class="form-control" th:field="${user.username}">
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" th:field="${user.email}">
                </div>

                <div class="form-group">
                    <label>Password</label>
                    <input type="password" class="form-control" th:field="${user.password}">
                </div>

                <div class="form-group">
                    <label>Roles</label>
                    <select class="form-control" multiple name="roleIds">
                        <option th:each="r : ${roles}"
                                th:value="${r.id}"
                                th:text="${r.name}"
                                th:selected="${user.roles.contains(r)}">
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Enabled</label>
                    <input type="checkbox" th:field="${user.enabled}">
                </div>

                <button class="btn btn-success">Update</button>
                <a href="/users" class="btn btn-secondary">Back</a>

            </form>
        </div>
    </div>

</th:block>
</html>
